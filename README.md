# Dungeon-fights
Проект представляет собой 2D игру на С++ и OpenGL с собственным графическим движком. 

## Mодули проекта:
* [Графический движок](#graphics)
* [Физический движок](#physics)
* [Конструктор уровней](#level_builder)
* [Логика игры](#game_logic)
* [AI врагов](#AI)

## Используемые библиотеки:
1. STL
2. GLFW
3. GLAD
4. GLM
5. RapidJSON

## <a id="graphics">Графический движок</a>

Графический движок является фасадом над OpenGL.
### Реализовано:
1. 2D текстуры
2. Текстурные алтасы
3. Спрайты
4. Анимированные спрайты

Текстура содержит массив подтекстур, благодаря этому поддерживаются текстурные атласы. <br>
Спрайты также содержат массив кадров, за переключение которых отвечают спрайт-аниматоры.<br>

![Image alt](https://github.com/yabaranov/Dungeon-fights/raw/main/res/textures/fight.png)

## <a id="physics">Физический движок</a>

Физический движок ответственен за обработку коллизий. 
### Реализовано:
1. Коллизии между динамическими и статическими объектами
2. Коллизии между динамическими объектами
3. Вызов реакций объектов при столкновениях
 
Коллайдеры объектов реализованы с помощью axis-aligned bounding box.<br>
Реакции при столкновениях осуществляются с помощью callback-функций.

## <a id="level_builder">Конструктор уровней</a>

Создавать уровни можно в res/levelSettings.json, где необходимо указать описание с помощью кодов блоков:

![Image alt](https://github.com/yabaranov/Dungeon-fights/raw/main/res/block_map.png)

Для игрока/врагов в уровне можно указать:
1. Жизни
2. Здоровье
3. Урон

## <a id="game_logic">Логика игры</a>

Цель игры - уничтожить всех вражеских юнитов. 
### Реализовано: 
1. Меню
2. Respawn
3. Кровь при попадании
4. Разрушение кирпичных стен

При нажатии в меню кнопки "play", игрок будет проходить уровни друг за другом. <br>
Враги и игрок имеют запас жизней, поэтому они будут возраждаться после смерти. <br>

## <a id="AI">AI врагов</a>
AI представляет собой алгоритм случайного движения вражеских юнитов, которые видят игрока в радиусе 5-ти блоков.
### Реализовано:
1. Смена направления и скорости
2. Стрельба по игроку
3. Уменьшение зоны видимости до 2-ух блоков, если игрок в кусте

Смена направления происходит при коллизии или в случайный момент времени.<br>
При выравнивании противника по одной из координат с игроком, противник стреляет пока попадает, иначе продолжает движение.


